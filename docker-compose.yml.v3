version: '3.1'

services:


  db:
    image: mysql:5.6
    container_name: seqdb_public_db
    env_file: .env
    #ports:
    # - "13306:3306"
    volumes:
     - ./mysql_autoload:/docker-entrypoint-initdb.d:ro
     - ./mysql_datadir:/var/lib/mysql

  tomcat:
   image: dina/seqdb_ui:v3.15
   container_name: seqdb_public
   #ports:
   # - "18080:8080" # http://localhost:18080
   environment:
    - VIRTUAL_HOST=public.seqdb.se
    - VIRTUAL_PORT=8080
   links:
    - db:db
   volumes:
    - ./srv/logs:/opt/tomcat/logs

networks:
  default:
    external:
       name: proxydocker_default
